[
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "Daily",
  "modified": "2022-07-13 10:18:23.629906",
  "name": "Lead Meeting",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": null,
  "script": "Today=frappe.utils.nowdate()\nfor lead in frappe.db.get_list('Lead',filters={\"status\":\"Scheduled\",\"contactdate\":Today}):\n    if lead:\n        ld_lead_name = frappe.db.get_value('Lead',lead.name, 'lead_name')\n        ld_company = frappe.db.get_value('Lead',lead.name, 'company')\n        ld_email_id = frappe.db.get_value('Lead',lead.name, 'email_id')\n        ld_contact_by = frappe.db.get_value('Lead',lead.name, 'id')\n        ld_contactdate = frappe.db.get_value('Lead',lead.name, 'contactdate')\n        # frappe.msgprint(\"Yes\")\n        doc1 = frappe.get_doc({'doctype': 'Lead Reminder Scheduler','title': 'New Notification'})\n        doc1.lead_=lead.name\n        doc1.lead_name = ld_lead_name\n        doc1.email_id = ld_email_id\n        doc1.company = ld_company\n        doc1.contact_by = ld_contact_by\n        doc1.contact_date = ld_contactdate\n        doc1.insert()\n\n",
  "script_type": "Scheduler Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "Daily",
  "modified": "2022-11-14 11:11:44.457501",
  "name": "Sales invoice-payment reminder",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": null,
  "script": "today=frappe.utils.nowdate()\nfor invoice in frappe.db.get_list('Sales Invoice',filters={'status':{'Overdue','Unpaid','Partly Paid'},'docstatus':1,'next_reminder':today}):\n    if invoice:\n        \n        s_customer = frappe.db.get_value('Sales Invoice',invoice.name, 'customer')\n        s_customer_email = frappe.db.get_value('Sales Invoice',invoice.name, 'customer_email')\n        s_outstanding_amount = frappe.db.get_value('Sales Invoice',invoice.name, 'outstanding_amount')\n        s_company = frappe.db.get_value('Sales Invoice',invoice.name, 'company')\n        s_due_date = frappe.db.get_value('Sales Invoice',invoice.name, 'due_date')\n        s_next_reminder=frappe.db.get_value('Sales Invoice',invoice.name, 'next_reminder')\n        s_paymentreminder=frappe.db.get_value('Sales Invoice',invoice.name, 'customer_payment_reminder')\n        \n        if int(s_outstanding_amount)>0:\n            frappe.db.set_value('Sales Invoice',invoice.name,'next_reminder',frappe.utils.add_days(s_next_reminder,int(s_paymentreminder)))\n            doc1 = frappe.get_doc({'doctype': 'Payment Reminder','title': 'New Notification'})\n            doc1.sales_invoice_reference=invoice.name\n            doc1.customer=s_customer\n            doc1.customer_email=s_customer_email\n            doc1.amount=s_outstanding_amount\n            doc1.company=s_company\n            doc1.due_date=s_due_date\n            doc1.insert()\n       \n    \n          \n          \n          ",
  "script_type": "Scheduler Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "event_frequency": "All",
  "modified": "2022-07-12 10:47:09.011401",
  "name": "Lead Next schedule",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Lead",
  "script": "contact_date=doc.contactdate\n\nif doc.class1==\"A\":\n    if doc.status==\"Scheduled\":\n        n_contactdate=frappe.utils.add_days(contact_date,+7)\n        doc.contactdate = n_contactdate\nif doc.class1==\"B\":\n    if doc.status==\"Scheduled\":\n        n_contactdate=frappe.utils.add_days(contact_date,+14)\n        doc.contactdate = n_contactdate\nif doc.class1==\"C\":\n    if doc.status==\"Scheduled\":\n        n_contactdate=frappe.utils.add_months(contact_date,1)\n        doc.contactdate = n_contactdate\n\n\n    ",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "Daily",
  "modified": "2022-07-12 22:30:27.533109",
  "name": "Job Reminder on service due date",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": null,
  "script": "today=frappe.utils.nowdate()\n# d=today.split(\"-\")[2]\n# m=today.split(\"-\")[1]\n# y=today.split(\"-\")[0]\n# newdate=d+\"-\"+m+\"-\"+y\n\nfor task in frappe.db.get_list('Task',filters={ 'status':{'UnAssigned','Open','Working','Overdue'},'service_due':today}):\n  if task:\n          t_subject = frappe.db.get_value('Task',task.name, 'subject')\n          t_customer = frappe.db.get_value('Task',task.name, 'customer')\n          t_created_date = frappe.db.get_value('Task',task.name, 'created_date')\n          t_service_due = frappe.db.get_value('Task',task.name, 'service_due')\n          t_assigned_to = frappe.db.get_value('Task',task.name, 'assigned_to')\n          t_remind_before = frappe.db.get_value('Task',task.name, 'reminder_before')\n          t_company = frappe.db.get_value('Task',task.name, 'company')\n       \n          doc1 = frappe.get_doc({'doctype': 'Task Notification','title': 'New Notification'})\n          doc1.service_id=task.name\n          doc1.subject=t_subject\n          doc1.customer=t_customer\n          doc1.created_date=t_created_date\n          doc1.service_due=t_service_due\n          doc1.assigned_to=t_assigned_to\n          doc1.message=\"Hello..Service \"+str(t_subject)+\" against customer \"+str(t_customer)+\" will end today. \"\n          doc1.end_day=\"Today\"\n          doc1.remind_before=t_remind_before\n          doc1.company=t_company\n          doc1.insert()",
  "script_type": "Scheduler Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "Daily",
  "modified": "2022-07-14 09:26:56.570730",
  "name": "Job Reminder",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": null,
  "script": "today=frappe.utils.nowdate()\n# for task in frappe.db.get_list('Task',filters={ 'status':{'Open','Working','Overdue'},'remind_on':today,'notifiied':0}):\nfor task in frappe.db.get_list('Task',filters={ 'status':{'UnAssigned','Open','Working','Overdue'},'remind_on':today}):\n  if task:\n        #   frappe.db.set_value('Task',task.name,'notifiied',1)\n        \n          t_subject = frappe.db.get_value('Task',task.name, 'subject')\n          t_customer = frappe.db.get_value('Task',task.name, 'customer')\n          t_created_date = frappe.db.get_value('Task',task.name, 'created_date')\n          t_service_due = frappe.db.get_value('Task',task.name, 'service_due')\n          t_assigned_to = frappe.db.get_value('Task',task.name, 'assigned_to')\n          t_remind_before = frappe.db.get_value('Task',task.name, 'reminder_before')\n          t_company = frappe.db.get_value('Task',task.name, 'company')\n          \n          \n          t_client_reminder= frappe.db.get_value('Task',task.name,'client_reminder')\n          t_msg_to_client=frappe.db.get_value('Task',task.name,'message_to_client')\n          \n          doc1 = frappe.get_doc({'doctype': 'Task Notification','title': 'New Notification'})\n          doc1.service_id=task.name\n          doc1.subject=t_subject\n          doc1.customer=t_customer\n          doc1.created_date=t_created_date\n          doc1.service_due=t_service_due\n          doc1.assigned_to=t_assigned_to\n          \n          doc1.message_to_client=t_msg_to_client\n          doc1.message=\"Hello..Service \"+str(t_subject)+\" against customer \"+str(t_customer)+\" will end after \"+t_remind_before+\" days.\"\n        #   doc1.message=task.name\n          doc1.end_day=\"reminder\"\n          doc1.remind_before=t_remind_before\n          doc1.client_reminder=t_client_reminder\n          doc1.company=t_company\n          doc1.insert()",
  "script_type": "Scheduler Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "event_frequency": "All",
  "modified": "2022-07-12 11:04:43.823124",
  "name": "Sales Invoice-payment-nextschedule",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Sales Invoice",
  "script": "today=frappe.utils.nowdate()\npostingdate=doc.posting_date\npaymentreminder=doc.customer_payment_reminder\ndoc.next_reminder=frappe.utils.add_days(postingdate,int(paymentreminder))\n\n\n# today=frappe.utils.nowdate()\n# postingdate=doc.posting_date\n# paymentreminder=doc.customer_payment_reminder\n# doc.next_reminder=frappe.utils.add_days(postingdate,int(paymentreminder))\n\n\n\n\n# frappe.msgprint(doc.due_date)\n# frappe.msgprint(today)\n# if today>doc.due_date:\n#     frappe.msgprint(\"will end soon\")\n# else:\n#     frappe.msgprint(\"ended\")\n\n\n# frappe.msgprint(\"today\"+today)\n# frappe.msgprint(\"next_reminder\"+doc.next_reminder)\n\n# doc1 = frappe.get_doc({'doctype': 'Payment Reminder','title': 'New Notification'})\n# doc1.sales_invoice_reference=\"fgeg\"\n# doc1.customer=\"s_customer\"\n# doc1.customer_email=\"shahinak1992@gmail.com\"\n# doc1.amount=\"s_outstanding_amount\"\n# doc1.company=\"s_company\"\n# doc1.message=\"hello\"\n# doc1.insert()",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "event_frequency": "All",
  "modified": "2023-06-09 11:04:19.762221",
  "name": "Setting Remind On",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Task",
  "script": "if doc.subject:\n    if int(doc.reminder_before)>0:\n        r_on=frappe.utils.add_days(doc.service_due,- int(doc.reminder_before))\n        doc.remind_on=r_on\n    else:\n        doc.remind_on=\" \"",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "event_frequency": "All",
  "modified": "2023-07-17 14:10:46.509358",
  "name": "Next Schedule On",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Task",
  "script": "\nif doc.subject:\n    doc.subject2=doc.subject\n    created_date=doc.created_date\n    validtill=doc.validtill  \n    repeat=doc.repeat_range\n    n_schedule=\" \"\n    if repeat==\"Weekly\":\n        n_schedule=frappe.utils.add_days(created_date,+7)\n        # doc.schedule = n_schedule\n    if repeat==\"Biweekly\":\n        n_schedule=frappe.utils.add_days(created_date,+14)\n        # doc.schedule = n_schedule\n    if repeat==\"Monthly\":\n        # n_schedule=frappe.utils.add_days(created_date,+30)\n        n_schedule=frappe.utils.add_months(created_date,1)\n        # doc.schedule = n_schedule\n    if repeat==\"Quarterly\":\n        # n_schedule=frappe.utils.add_days(created_date,+181)\n        n_schedule=frappe.utils.add_months(created_date,3)\n        # doc.schedule = n_schedule\n    if repeat==\"Yearly\":\n        # n_schedule=frappe.utils.add_days(created_date,+364)\n        n_schedule=frappe.utils.add_months(created_date,12)\n        # doc.schedule = n_schedule\n    if not n_schedule==\" \":\n        \n        days_diff = frappe.utils.date_diff(validtill, n_schedule)\n        if days_diff>=0:\n            doc.schedule = n_schedule\n            doc.repeat=1\n        else:\n            doc.schedule=\"\"\n            doc.repeat=0\n    else:\n        doc.repeat=0\n        \nelif doc.subject1:\n    doc.subject2=doc.subject1\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# created_date=doc.created_date\n# validtill=doc.validtill  \n# repeat=doc.repeat_range\n# n_schedule=\" \"\n# if repeat==\"Weekly\":\n#     n_schedule=frappe.utils.add_days(created_date,+7)\n#     # doc.schedule = n_schedule\n# if repeat==\"Biweekly\":\n#     n_schedule=frappe.utils.add_days(created_date,+14)\n#     # doc.schedule = n_schedule\n# if repeat==\"Monthly\":\n#     # n_schedule=frappe.utils.add_days(created_date,+30)\n#     n_schedule=frappe.utils.add_months(created_date,1)\n#     # doc.schedule = n_schedule\n# if repeat==\"Quarterly\":\n#     # n_schedule=frappe.utils.add_days(created_date,+181)\n#     n_schedule=frappe.utils.add_months(created_date,3)\n#     # doc.schedule = n_schedule\n# if repeat==\"Yearly\":\n#     # n_schedule=frappe.utils.add_days(created_date,+364)\n#     n_schedule=frappe.utils.add_months(created_date,12)\n#     # doc.schedule = n_schedule\n\n# if not n_schedule==\" \":\n\n#     days_diff = frappe.utils.date_diff(validtill, n_schedule)\n    \n#     if days_diff>=0:\n#         doc.schedule = n_schedule\n#     else:\n#         doc.schedule=\"\"\n#         doc.repeat=0\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "event_frequency": "Daily",
  "modified": "2023-07-17 14:14:02.974157",
  "name": "Task Repeat",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Customer",
  "script": "\nfor task in frappe.db.get_list('Task',filters={'repeat':1,\"schedule\":frappe.utils.nowdate()}):\n    if task:\n        repeat_range = frappe.db.get_value('Task',task.name, 'repeat_range')\n        next_schedule= frappe.db.get_value('Task',task.name, 'schedule')\n        s_subject= frappe.db.get_value('Task',task.name, 'subject')\n        s_status= frappe.db.get_value('Task',task.name, 'status')\n        s_customer=frappe.db.get_value('Task',task.name, 'customer')\n        s_status= frappe.db.get_value('Task',task.name, 'status')\n        s_assigned_to= frappe.db.get_value('Task',task.name, 'assigned_to')\n        employee_name= frappe.db.get_value('Task',task.name, 'employee_name')\n        s_due_date= frappe.db.get_value('Task',task.name, 'due_date')\n        s_due_time_in_hours= frappe.db.get_value('Task',task.name, 'employee_due_time')\n        s_description= frappe.db.get_value('Task',task.name, 'description')\n        s_service_due=frappe.db.get_value('Task',task.name, 'service_due')\n        s_remind_before=frappe.db.get_value('Task',task.name, 'reminder_before')\n        s_valid_till=frappe.db.get_value('Task',task.name, 'validtill')\n        s_day=frappe.db.get_value('Task',task.name,'day')\n        s_client_reminder=frappe.db.get_value('Task',task.name,'client_reminder')\n        s_message_to_client=frappe.db.get_value('Task',task.name,'message_to_client')\n        job_row_name=frappe.db.get_value('Task',task.name, 'job_row_name')\n\n        if repeat_range==\"Weekly\":\n            \n            # if next_schedule==frappe.utils.nowdate():\n\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+7),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+7),\"repeat_range\":\"Weekly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                    \n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+7),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+7),\"repeat_range\":\"Weekly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_days(s_due_date,+7),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                # frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n                \n        if repeat_range==\"Biweekly\":\n            \n            # if next_schedule==frappe.utils.nowdate():\n\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+14),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+14),\"repeat_range\":\"Monthly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+14),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+14),\"repeat_range\":\"Monthly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_days(s_due_date,+14),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                # frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n        if repeat_range==\"Monthly\":\n            # if next_schedule==frappe.utils.nowdate():\n\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"service_due\":frappe.utils.add_months(s_service_due,1),\"created_date\":frappe.utils.nowdate(),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),1),\"repeat_range\":\"Monthly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"service_due\":frappe.utils.add_months(s_service_due,1),\"created_date\":frappe.utils.nowdate(),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),1),\"repeat_range\":\"Monthly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,1),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                # frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n        if repeat_range==\"Quarterly\":\n            # if next_schedule==frappe.utils.nowdate():\n\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,3),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),3),\"repeat_range\":\"Quarterly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,3),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),3),\"repeat_range\":\"Quarterly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,3),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                # frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n        if repeat_range==\"Yearly\":\n            # if next_schedule==frappe.utils.nowdate():\n\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,12),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),12),\"repeat_range\":\"Yearly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,12),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),12),\"repeat_range\":\"Yearly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,12),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.job_row_name=job_row_name\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                # frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n\n   \n\n\n\n\n\n\n\n# for task in frappe.db.get_list('Task',filters={ 'repeat':1,\"customer\":\"AL JENDI FOODSTUFF TR. LLC\"}):\n#     if task:\n#         repeat_range = frappe.db.get_value('Task',task.name, 'repeat_range')\n#         next_schedule= frappe.db.get_value('Task',task.name, 'schedule')\n#         s_subject= frappe.db.get_value('Task',task.name, 'subject')\n#         s_status= frappe.db.get_value('Task',task.name, 'status')\n#         s_customer=frappe.db.get_value('Task',task.name, 'customer')\n#         s_status= frappe.db.get_value('Task',task.name, 'status')\n#         s_assigned_to= frappe.db.get_value('Task',task.name, 'assigned_to')\n#         employee_name= frappe.db.get_value('Task',task.name, 'employee_name')\n#         s_due_date= frappe.db.get_value('Task',task.name, 'due_date')\n#         s_due_time_in_hours= frappe.db.get_value('Task',task.name, 'employee_due_time')\n#         s_description= frappe.db.get_value('Task',task.name, 'description')\n#         s_service_due=frappe.db.get_value('Task',task.name, 'service_due')\n#         s_remind_before=frappe.db.get_value('Task',task.name, 'reminder_before')\n#         s_valid_till=frappe.db.get_value('Task',task.name, 'validtill')\n#         s_day=frappe.db.get_value('Task',task.name,'day')\n#         s_client_reminder=frappe.db.get_value('Task',task.name,'client_reminder')\n#         s_message_to_client=frappe.db.get_value('Task',task.name,'message_to_client')\n        \n#         if repeat_range==\"Weekly\":\n            \n#             if next_schedule==frappe.utils.nowdate():\n#                 if s_status==\"UnAssigned\":\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+7),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+7),\"repeat_range\":\"Weekly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n                   \n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n                    \n#                 else:\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+7),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+7),\"repeat_range\":\"Weekly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_days(s_due_date,+7),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.employee_name=employee_name\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n                \n#         if repeat_range==\"Biweekly\":\n            \n#             if next_schedule==frappe.utils.nowdate():\n#                 if s_status==\"UnAssigned\":\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+14),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+14),\"repeat_range\":\"Monthly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 else:\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+14),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+14),\"repeat_range\":\"Monthly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_days(s_due_date,+14),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.employee_name=employee_name\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n#         if repeat_range==\"Monthly\":\n#             if next_schedule==frappe.utils.nowdate():\n#                 if s_status==\"UnAssigned\":\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"service_due\":frappe.utils.add_months(s_service_due,1),\"created_date\":frappe.utils.nowdate(),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),1),\"repeat_range\":\"Monthly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 else:\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"service_due\":frappe.utils.add_months(s_service_due,1),\"created_date\":frappe.utils.nowdate(),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),1),\"repeat_range\":\"Monthly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,1),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.employee_name=employee_name\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n#         if repeat_range==\"Quarterly\":\n#             if next_schedule==frappe.utils.nowdate():\n#                 if s_status==\"UnAssigned\":\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,3),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),3),\"repeat_range\":\"Quaterly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 else:\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,3),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),3),\"repeat_range\":\"Quaterly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,3),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.employee_name=employee_name\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n#         if repeat_range==\"Yearly\":\n#             if next_schedule==frappe.utils.nowdate():\n#                 if s_status==\"UnAssigned\":\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,12),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),12),\"repeat_range\":\"Yearly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 else:\n#                     new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,12),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),12),\"repeat_range\":\"Yearly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,12),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n#                     new_task.repeat=1\n#                     new_task.employee_name=employee_name\n#                     new_task.client_reminder=s_client_reminder\n#                     new_task.message_to_client=s_message_to_client\n#                     new_task.insert()\n#                 frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n",
  "script_type": "Scheduler Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2022-04-23 11:26:15.429192",
  "name": "Oppurtunity Meeting",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": null,
  "script": "Today=frappe.utils.nowdate()\nfor opportunity in frappe.db.get_list('Opportunity',filters={\"status\":\"Open\"}):\n    if opportunity:\n        op_client_name = frappe.db.get_value('Opportunity',opportunity.name, 'customer_name')\n        op_company = frappe.db.get_value('Opportunity',opportunity.name, 'company')\n        op_lead = frappe.db.get_value('Opportunity',opportunity.name, 'party_name')\n        op_contact_by = frappe.db.get_value('Opportunity',opportunity.name, 'contact_by')\n        op_scheduled_on = frappe.db.get_value('Opportunity',opportunity.name, 'scheduled_on')\n        op_time = frappe.db.get_value('Opportunity',opportunity.name, 'time')\n        # frappe.msgprint(\"Yes\")\n        doc1 = frappe.get_doc({'doctype': 'Oppurtunity Meeting','title': 'New Notification'})\n        doc1.name1=opportunity.name\n        doc1.client = op_client_name\n        doc1.lead_reference = op_lead \n        doc1.company = op_company_company\n        doc1.contact_by = op_contact_by\n        doc1.date = op_scheduled_on\n        doc1.time = op_time\n        doc1.insert()\n       \n\n",
  "script_type": "Scheduler Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "event_frequency": "All",
  "modified": "2022-04-23 11:03:42.797634",
  "name": "Date Checking",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Opportunity",
  "script": "Today=frappe.utils.nowdate()\nfrappe.msgprint(Today)\nfrappe.msgprint(doc.scheduled_on)",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 1,
  "api_method": "timesheet_row_add",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2022-07-12 10:53:23.587015",
  "name": "Task-Timesheet ChildRow",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": null,
  "script": "#frappe.msgprint(frappe.form_dict.hours)\nx = frappe.get_doc('Timesheet',frappe.form_dict.timesheet)\nx.append(\"time_logs\", \n{\n        \"activity_type\":frappe.form_dict.activity_type,\n        \"task\":frappe.form_dict.task,\n        \"customer\":frappe.form_dict.customer,\n        \"from_time\":frappe.form_dict.from_time,\n        \"to_time\":frappe.form_dict.to_time,\n        \"hours\":float(frappe.form_dict.hours)\n})\nx.save()\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Delete",
  "event_frequency": "All",
  "modified": "2022-07-12 10:54:47.275085",
  "name": "Default Customer Delete restriction",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Customer",
  "script": "if doc.name==\"Default Customer\":\n    frappe.msgprint(\"You Can't Delete This Doc\")\n    raise frappe.ValidationError\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "event_frequency": "All",
  "modified": "2023-05-19 13:32:30.333561",
  "name": "s1",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Customer",
  "script": "for task in frappe.db.get_list('Task',filters={ 'repeat':1,\"customer\":\"ART OF AESTHETIC POLYCLINIC\"}):\n    if task:\n        repeat_range = frappe.db.get_value('Task',task.name, 'repeat_range')\n        next_schedule= frappe.db.get_value('Task',task.name, 'schedule')\n        s_subject= frappe.db.get_value('Task',task.name, 'subject')\n        s_status= frappe.db.get_value('Task',task.name, 'status')\n        s_customer=frappe.db.get_value('Task',task.name, 'customer')\n        s_status= frappe.db.get_value('Task',task.name, 'status')\n        s_assigned_to= frappe.db.get_value('Task',task.name, 'assigned_to')\n        employee_name= frappe.db.get_value('Task',task.name, 'employee_name')\n        s_due_date= frappe.db.get_value('Task',task.name, 'due_date')\n        s_due_time_in_hours= frappe.db.get_value('Task',task.name, 'employee_due_time')\n        s_description= frappe.db.get_value('Task',task.name, 'description')\n        s_service_due=frappe.db.get_value('Task',task.name, 'service_due')\n        s_remind_before=frappe.db.get_value('Task',task.name, 'reminder_before')\n        s_valid_till=frappe.db.get_value('Task',task.name, 'validtill')\n        s_day=frappe.db.get_value('Task',task.name,'day')\n        s_client_reminder=frappe.db.get_value('Task',task.name,'client_reminder')\n        s_message_to_client=frappe.db.get_value('Task',task.name,'message_to_client')\n        \n        if repeat_range==\"Weekly\":\n            \n            if next_schedule==frappe.utils.nowdate():\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+7),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+7),\"repeat_range\":\"Weekly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                   \n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                    \n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+7),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+7),\"repeat_range\":\"Weekly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_days(s_due_date,+7),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n                \n        if repeat_range==\"Biweekly\":\n            \n            if next_schedule==frappe.utils.nowdate():\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+14),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+14),\"repeat_range\":\"Monthly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_days(s_service_due,+14),\"schedule\":frappe.utils.add_days(frappe.utils.nowdate(),+14),\"repeat_range\":\"Monthly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_days(s_due_date,+14),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n        if repeat_range==\"Monthly\":\n            if next_schedule==frappe.utils.nowdate():\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"service_due\":frappe.utils.add_months(s_service_due,1),\"created_date\":frappe.utils.nowdate(),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),1),\"repeat_range\":\"Monthly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"service_due\":frappe.utils.add_months(s_service_due,1),\"created_date\":frappe.utils.nowdate(),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),1),\"repeat_range\":\"Monthly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,1),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n        if repeat_range==\"Quarterly\":\n            if next_schedule==frappe.utils.nowdate():\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,3),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),3),\"repeat_range\":\"Quaterly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,3),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),3),\"repeat_range\":\"Quaterly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,3),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n        if repeat_range==\"Yearly\":\n            if next_schedule==frappe.utils.nowdate():\n                if s_status==\"UnAssigned\":\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,12),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),12),\"repeat_range\":\"Yearly\",\"status\":\"UnAssigned\",\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                else:\n                    new_task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":s_subject, \"description\": s_description,\"created_date\":frappe.utils.nowdate(),\"service_due\":frappe.utils.add_months(s_service_due,12),\"schedule\":frappe.utils.add_months(frappe.utils.nowdate(),12),\"repeat_range\":\"Yearly\",\"status\":\"Open\",\"assigned_to\":s_assigned_to,\"due_date\":frappe.utils.add_months(s_due_date,12),\"employee_due_time\":s_due_time_in_hours,\"reminder_before\":s_remind_before,\"customer\":s_customer,\"validtill\":s_valid_till,\"day\":s_day})\n                    new_task.repeat=1\n                    new_task.employee_name=employee_name\n                    new_task.client_reminder=s_client_reminder\n                    new_task.message_to_client=s_message_to_client\n                    new_task.insert()\n                frappe.db.set_value('Task',task.name, 'repeat', 0)\n                \n                \n# task = frappe.get_doc({\"doctype\":\"Task\",\"subject\":\"newtest\", \"description\": \"test\"})\n# task.insert()\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "event_frequency": "All",
  "modified": "2023-06-22 15:40:04.110680",
  "name": "subject",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "Task",
  "script": "if doc.subject1:\n    doc.subject2=doc.subject1\n    \n    \nif doc.subject:\n    doc.subject2=doc.doc.subject",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "event_frequency": "All",
  "modified": "2023-09-06 09:01:08.840416",
  "name": "Update trn number",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "reference_doctype": "test2",
  "script": "filters = {\n      \n    }\n\n   \nsales_invoices = frappe.get_all(\"Sales Invoice\", filters=filters, fields=[\"name\"])\n\n   \nfor invoice in sales_invoices:\n        frappe.db.set_value(\"Sales Invoice\", invoice[\"name\"], \"company_trn\", \"104113642300003\")",
  "script_type": "DocType Event"
 }
]